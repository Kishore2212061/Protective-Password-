{"ast":null,"code":"import { initializeApp } from \"firebase/app\";\nimport { getFirestore, collection, addDoc, onSnapshot, query, where, getDocs, deleteDoc, orderBy, limit } from \"firebase/firestore\";\n\n// Firebase configuration object\nconst firebaseConfig = {\n  apiKey: \"AIzaSyDnqFstg7haG60B6vUWbn7hvAFFs5fjSZw\",\n  authDomain: \"fir-d784c.firebaseapp.com\",\n  projectId: \"fir-d784c\",\n  storageBucket: \"fir-d784c.appspot.com\",\n  messagingSenderId: \"1081359533358\",\n  appId: \"1:1081359533358:web:50c99e54ab365991ebe6bf\"\n};\nconst app = initializeApp(firebaseConfig);\nconst db = getFirestore(app);\nconst colref = collection(db, 'users');\ndocument.addEventListener('DOMContentLoaded', () => {\n  const form = document.getElementById('dataForm');\n  const userListElement = document.getElementById('userList');\n  const deleteForm = document.getElementById('deleteForm');\n  if (form) {\n    form.addEventListener('submit', e => {\n      e.preventDefault();\n      const name = document.getElementById('name').value;\n      const age = document.getElementById('age').value;\n      try {\n        addDoc(colref, {\n          name,\n          age\n        });\n        alert('form added success');\n        form.reset();\n      } catch (error) {\n        console.error(\"Error adding document: \", error);\n      }\n    });\n  }\n  if (userListElement) {\n    onSnapshot(colref, snapshot => {\n      const users = snapshot.docs.map(doc => `<p>${doc.data().name} - ${doc.data().age}</p>`);\n      document.getElementById('userList').innerHTML = users;\n    });\n  }\n  if (deleteForm) {\n    deleteForm.addEventListener('submit', e => {\n      e.preventDefault();\n      const nameToDelete = document.getElementById('deleteName').value;\n      const q = query(colref, where('name', \"==\", nameToDelete));\n      getDocs(q).then(queryy => {\n        if (queryy.empty) {\n          alert('No user found with that name!');\n        } else {\n          queryy.forEach(doc => {\n            deleteDoc(doc.ref).then(() => {\n              alert('Data deleted successfully!');\n              deleteForm.reset();\n            }).catch(error => {});\n          });\n        }\n      }).catch(error => {\n        console.error(\"Error getting documents: \", error);\n      });\n    });\n  }\n  const fetchUsers = () => {\n    const q = query(colref, orderBy('age', 'desc'), limit(1)); // Fetch users, order by age, limit to 10\n\n    getDocs(q).then(querySnapshot => {\n      const users = querySnapshot.docs.map(doc => `<p>${doc.data().name} - ${doc.data().age}</p>`);\n      userListElement.innerHTML = users.join('');\n    }).catch(error => {\n      console.error(\"Error getting documents: \", error);\n    });\n  };\n  onSnapshot(colref, snapshot => {\n    fetchUsers(); // Fetch users when there's a change\n  });\n  const multiForm = document.getElementById('multiInputForm');\n  multiForm.addEventListener('submit', e => {\n    e.preventDefault();\n    const username = document.getElementById('username').value;\n    const gender = document.querySelector('input[name=\"gender\"]:checked').value;\n    const agree = document.getElementById('agree').checked;\n\n    // Using the Firestore db instance correctly\n    addDoc(colref, {\n      username,\n      gender,\n      agree\n    }) // Use the colref directly\n    .then(() => {\n      alert('Data added successfully!');\n      multiForm.reset();\n    }).catch(error => {\n      console.error(\"Error adding document: \", error);\n    });\n  });\n});","map":{"version":3,"names":["initializeApp","getFirestore","collection","addDoc","onSnapshot","query","where","getDocs","deleteDoc","orderBy","limit","firebaseConfig","apiKey","authDomain","projectId","storageBucket","messagingSenderId","appId","app","db","colref","document","addEventListener","form","getElementById","userListElement","deleteForm","e","preventDefault","name","value","age","alert","reset","error","console","snapshot","users","docs","map","doc","data","innerHTML","nameToDelete","q","then","queryy","empty","forEach","ref","catch","fetchUsers","querySnapshot","join","multiForm","username","gender","querySelector","agree","checked"],"sources":["C:/Users/kishore/demo/src/index.js"],"sourcesContent":["import { initializeApp } from \"firebase/app\";\nimport { getFirestore, collection, addDoc,onSnapshot,query, where, getDocs, deleteDoc,orderBy,limit } from \"firebase/firestore\";\n\n// Firebase configuration object\nconst firebaseConfig = {\n  apiKey: \"AIzaSyDnqFstg7haG60B6vUWbn7hvAFFs5fjSZw\",\n  authDomain: \"fir-d784c.firebaseapp.com\",\n  projectId: \"fir-d784c\",\n  storageBucket: \"fir-d784c.appspot.com\",\n  messagingSenderId: \"1081359533358\",\n  appId: \"1:1081359533358:web:50c99e54ab365991ebe6bf\"\n};\nconst app=initializeApp(firebaseConfig);\nconst db=getFirestore(app);\nconst colref=collection(db,'users');\n\n\ndocument.addEventListener('DOMContentLoaded',()=>{\nconst form=document.getElementById('dataForm');\nconst userListElement = document.getElementById('userList');\nconst deleteForm=document.getElementById('deleteForm');\n\n\nif(form)\n{\n  form.addEventListener('submit',(e)=>{\n\n    e.preventDefault();\n    const name=document.getElementById('name').value;\n    const age=document.getElementById('age').value;\n    try{\n      addDoc(colref,{name,age});\n      alert('form added success');\n      form.reset();\n    }catch(error)\n    {\n      console.error(\"Error adding document: \", error);\n \n    }\n  })\n}\nif(userListElement){\nonSnapshot(colref,(snapshot) => {\n  const users = snapshot.docs.map(doc => `<p>${doc.data().name} - ${doc.data().age}</p>`);\n  document.getElementById('userList').innerHTML = users;\n});\n}\n\nif (deleteForm) {\n  deleteForm.addEventListener('submit', (e) => {\n      e.preventDefault();\n      const nameToDelete = document.getElementById('deleteName').value;\n      \n     \n\nconst q=query(colref,where('name',\"==\",nameToDelete));\ngetDocs(q).then((queryy)=>{\nif(queryy.empty){\n  alert('No user found with that name!');\n\n}\nelse{\nqueryy.forEach((doc)=>{\n  deleteDoc(doc.ref).then(()=>{\n    alert('Data deleted successfully!');\n    deleteForm.reset();\n  }).catch((error)=>{\n\n  }\n  )\n})\n}\n}).catch((error)=>{\n  console.error(\"Error getting documents: \", error);\n\n})\n  });\n}\nconst fetchUsers = () => {\n  const q = query(colref, orderBy('age', 'desc'), limit(1)); // Fetch users, order by age, limit to 10\n  \n  getDocs(q)\n      .then((querySnapshot) => {\n          const users = querySnapshot.docs.map(doc => `<p>${doc.data().name} - ${doc.data().age}</p>`);\n          userListElement.innerHTML = users.join('');\n      })\n      .catch((error) => {\n          console.error(\"Error getting documents: \", error);\n      });\n};\nonSnapshot(colref, (snapshot) => {\n  fetchUsers(); // Fetch users when there's a change\n});\n\nconst multiForm = document.getElementById('multiInputForm');\nmultiForm.addEventListener('submit', (e) => {\n    e.preventDefault();\n    const username = document.getElementById('username').value;\n    const gender = document.querySelector('input[name=\"gender\"]:checked').value;\n    const agree = document.getElementById('agree').checked;\n  \n    // Using the Firestore db instance correctly\n    addDoc(colref, { username, gender, agree }) // Use the colref directly\n        .then(() => {\n            alert('Data added successfully!');\n            multiForm.reset();\n        })\n        .catch((error) => {\n            console.error(\"Error adding document: \", error);\n        });\n});\n\n});\n\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}